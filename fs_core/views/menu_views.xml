<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- 
    Flight School Settings Menu
    ===========================
    Central settings and configuration app.
    -->

    <!-- Action for Settings (must be defined before menu references it) -->
    <record id="action_res_config_settings" model="ir.actions.act_window">
        <field name="name">Flight School Settings</field>
        <field name="res_model">res.config.settings</field>
        <field name="view_mode">form</field>
        <field name="target">current</field>
        <field name="context">{'module': 'fs_core', 'bin_size': False}</field>
    </record>

    <!-- Root Menu: FS Settings (main app menu) -->
    <menuitem id="menu_flight_school_root"
              name="Settings"
              web_icon="fs_core,static/description/icon.svg"
              sequence="100"/>

    <!-- Users Action -->
    <record id="action_fs_users" model="ir.actions.act_window">
        <field name="name">Users</field>
        <field name="res_model">res.users</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_res_users_list_fs"/>
        <field name="view_ids" eval="[(5, 0, 0), 
            (0, 0, {'view_mode': 'list', 'view_id': ref('view_res_users_list_fs')}),
            (0, 0, {'view_mode': 'form', 'view_id': ref('view_res_users_form_fs')})]"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Manage system users
            </p>
            <p>Assign logins and access rights to personnel.</p>
        </field>
    </record>

    <!-- Groups Action -->
    <record id="action_fs_groups" model="ir.actions.act_window">
        <field name="name">Roles</field>
        <field name="res_model">res.groups</field>
        <field name="view_mode">list,form</field>
        <field name="domain" eval="str([('privilege_id.category_id', '=', ref('fs_core.module_category_flight_school'))])"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Manage Roles
            </p>
            <p>Configure access levels and permissions for the Flight School.</p>
        </field>
    </record>

    <!-- Privileges Action -->
    <record id="action_fs_privileges" model="ir.actions.act_window">
        <field name="name">Privileges</field>
        <field name="res_model">res.groups.privilege</field>
        <field name="view_mode">list,form</field>
        <field name="domain" eval="str([('category_id', '=', ref('fs_core.module_category_flight_school'))])"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Manage Privileges
            </p>
            <p>Configure high-level privileges for the Flight School.</p>
        </field>
    </record>

    <!-- General Settings -->
    <menuitem id="menu_config_general"
              name="General Settings"
              parent="menu_flight_school_root"
              action="action_res_config_settings"
              sequence="1"
              groups="group_flight_school_admin"/>

    <!-- Users Settings -->
    <menuitem id="menu_config_users"
              name="Users"
              parent="menu_flight_school_root"
              action="action_fs_users"
              sequence="2"
              groups="group_flight_school_manager"/>

    <!-- Departments Settings -->
    <menuitem id="menu_config_departments"
              name="Departments"
              parent="menu_flight_school_root"
              action="action_fs_department"
              sequence="3"
              groups="group_flight_school_admin"/>

    <!-- Roles Settings -->
    <menuitem id="menu_config_roles"
              name="Roles"
              parent="menu_flight_school_root"
              action="action_fs_groups"
              sequence="10"
              groups="group_flight_school_manager"/>

    <!-- Privileges Settings -->
    <menuitem id="menu_config_privileges"
              name="Privileges"
              parent="menu_flight_school_root"
              action="action_fs_privileges"
              sequence="4"
              groups="group_flight_school_manager"/>

</odoo>
